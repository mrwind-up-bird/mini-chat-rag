# Letter to Myself (Session Handoff)

**Date:** 2026-02-06 ~11:15 UTC

## 1. Executive Summary
* **Goal:** Added file upload support (PDF/DOCX/TXT/MD/CSV) with backend extraction, frontend drag-and-drop, multi-file upload, Postman collection update, and committed stale test files. Now starting: copy-to-clipboard + thumbs up/down feedback on chat responses.
* **Current Status:** All features committed and pushed. About to implement chat response actions (copy + feedback buttons).

## 2. The "Done" List (Context Anchor)
* `app/services/extract.py` — text extraction service (PDF via pypdf, DOCX via python-docx, TXT/MD/CSV via UTF-8 decode)
* `app/api/v1/sources.py` — `POST /v1/sources/upload` multipart endpoint with validation + auto-ingest
* `dashboard/index.html` — multi-file drag-and-drop zone in Sources modal, sequential upload with progress bar
* `dashboard/css/app.css` — `.drop-zone`, `.file-list`, `.file-preview`, `.upload-progress` styles
* `dashboard/js/api.js` — `uploadSource(formData)` method
* `tests/test_extract.py` — 6 extraction tests
* `tests/test_upload.py` — 5 upload endpoint tests
* `postman/MiniRAG.postman_collection.json` — 3 new upload requests (34 total, 67 assertions)
* `postman/fixtures/test_upload.txt`, `postman/fixtures/test_bad.exe` — Newman test fixtures
* Committed 5 previously untracked test files: `test_auth_login.py`, `test_list_chats.py`, `test_stats.py`, `test_system_health.py`, `test_users.py`
* **60 pytest tests passing, 67 Newman assertions passing**

## 3. The "Pain" Log (CRITICAL)
* Newman `--folder` flag skips Bootstrap, causing 401s — must run full collection for auth to work
* `python3` (system) lacks venv deps — always use `.venv/bin/python3` for scripts
* PDF test uses pypdf internals (`DecodedStreamObject`) — fragile across pypdf versions

## 4. Active Variable State
* Docker services: postgres:5432, qdrant:6333, redis:6379
* Uvicorn running on port 8000 (background task `b6ab064`)
* Git: branch `main`, latest commit `620f962`, pushed to `origin/main`
* 60 pytest tests, 34 Postman requests / 67 assertions

## 5. Immediate Next Steps
1. [ ] Add copy-to-clipboard button on chat assistant responses (Try It modal + Chat History)
2. [ ] Add thumbs up/down feedback buttons on assistant responses
3. [ ] Backend: store feedback (new model or field on Message)
4. [ ] API endpoint for submitting feedback
5. [ ] Tests for feedback endpoint
6. [ ] Commit and push
